{% extends 'listings_base.html' %}
{% load thumbnail %}

{% block content %}
  <script type="text/javascript" src="//api.filepicker.io/v1/filepicker.js"></script>
  <script>
      filepicker.setKey('ATM8Oz2TyCtiJiHu6pP6Qz');
  </script>

<div class="listing-dash">
  <div class="dash-title">
    <div class="btn-group" data-toggle="buttons-radio">
      <button type="button" class="btn btn-primary" onclick="Edit()">Edit</button>
      <button type="button" class="btn btn-primary active" onclick="Preview()">Preview</button>
    </div>
  </div>  
  <div class="dash-content">
    <p>Choose whether to edit or </br>
    preview your content by </br>
    toggling the buttons above</p>
  </div>
</div>

<div class="listing">
  <div class="row">
    <div class="l-body">
      <h1 class="l-title" style="text-align:left;float:left;">{{listing.title}}</h1>
      <h1 class="l-dash" style="text-align:left;float:left;margin-left:11px;"> - </h1>
      <h1 class="l-price" style="text-align:left;float:left;"> <span>&nbsp;</span>${{listing.price}}</h1>
      <h1 class = "l-location"> ({{listing.location}}) </h1><!--This has to from the address function-->
    </div>
  </div>

  <div class="container span8">
          <!--  Carousel - consult the Twitter Bootstrap docs at 
          http://twitter.github.com/bootstrap/javascript.html#carousel -->
    <div id="this-carousel-id" class="carousel slide"><!-- class of slide for animation -->
      <div class="carousel-inner">
        {% for photo in photos %}
          <div {% if forloop.first %} class="item active" {% else %} class="item"{% endif %}> <!-- class of active since it's the first item --> 
            <img src="{{ MEDIA_URL }}{{ photo.url }}" alt="" />
            <div class="carousel-caption">
              <p>This is the first Picture's description</p>
            </div>
          </div>
        {% endfor %}
      </div><!-- /.carousel-inner -->
      <!--  Next and Previous controls below
            href values must reference the id for this carousel -->
      <a class="carousel-control left" href="#this-carousel-id" data-slide="prev">&lsaquo;</a>
      <a class="carousel-control right" href="#this-carousel-id" data-slide="next">&rsaquo;</a>
    </div><!-- /.carousel -->


    <div class="l-description l-entry">
      {{listing.description|linebreaks}}
    </div>
  </div> <!-- /container -->
</div>



<!-- Edit Page -->
<div class="edit" style="display:none">
  <div class="listing-edit">
      <form method="POST" action="">
          {% csrf_token %}
          <div class="l-header">
              <h1 class="l-title">
                  <fieldset>
                      <input id="id_title" name="title" type="text" placeholder="{{listing.title}}">
                      <input id="id_price" name="price" type="text" placeholder="{{listing.price}}">
                      <input id="id_location" name="location" type="text" placeholder="{{listing.location}}">
                  </fieldset>
              </h1>
          </div>
          {% include "listings_specs.html" %}

          <ul class="form">
              <li>
                  <textarea cols="60" id="id_description" name="description" rows="10" placeholder="{{listing.location}}"></textarea>
              </li>
              <li>
                  <select id="id_category" name="category" style="display:none">
                      <option value="1" selected="selected" id="nameTitle">
                      </option>
                  </select>
              </li>
              <li>
                  <select id="id_listing_type" name="listing_type" style="display:none">
                      <option value="1">Private</option>
                      <option value="2" selected="selected">Public</option>
                  </select>
              </li>
              <br>
              <button type="button" class="btn btn-primary" onclick='fileUpload()'>Upload More Pictures Here</button>
              <p>
                  <div id="pics"></div>
              </p>
              <br>
              <br>
              <li>
                  <input class="btn" type="submit" value="Submit Changes">
              </li>
          </ul>
      </form>
  </div>
</div>
      </div>
<!-- End Edit Page -->



<div class="l-footnote" style ="margin-left:55px;">
  Created with <a href="http://www.rocketlistings.com" class="icon">Rocket Listings</a>. Blast off.
</div>

<div class="clearfix"></div>


    <!-- Le javascript
    ================================================== -->
    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.7.2.min.js"><\/script>')</script>
    <!-- Bootstrap jQuery plugins compiled and minified -->
    <script src="js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function(){
        $('.carousel').carousel({
          interval: 10000
        });
    })
    </script>
  {% endblock %}
