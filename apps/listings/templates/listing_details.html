{% extends 'listings_base.html' %}
{% load thumbnail %}

{% block content %}
  <script type="text/javascript" src="//api.filepicker.io/v1/filepicker.js"></script>
  <script>
      filepicker.setKey('ATM8Oz2TyCtiJiHu6pP6Qz');
  </script>

<div class="listing-dash">
  <div class="dash-title">
    <div class="btn-group" data-toggle="buttons-radio">
      <button type="button" class="btn btn-primary" onclick="Edit()">Edit</button>
      <button type="button" class="btn btn-primary active" onclick="Preview()">Preview</button>
    </div>
  </div>  
  <div class="dash-content">
    <p>
      Choose whether to edit or </br>
      preview your content by </br>
      toggling the buttons above
    </p>
  </div>
</div>

<!-- Preview Page -->
<div class="listing">
  <div class="row">
    <div class="l-body">
      <h1 class="l-title title" style="text-align:left;float:left;">{{listing.title}}</h1>
      <h1 class="l-dash" style="text-align:left;float:left;margin-left:11px;"> - </h1>
      <h1 class="l-price" style="text-align:left;float:left;"> <span>&nbsp;</span>${{listing.price}}</h1>
      <h1 class = "l-location"> ({{listing.location}}) </h1><!--This has to from the address function-->
    </div>
  </div>

  <div class="container span8">
          <!--  Carousel - consult the Twitter Bootstrap docs at 
          http://twitter.github.com/bootstrap/javascript.html#carousel -->
    <div id="this-carousel-id" class="carousel slide"><!-- class of slide for animation -->
      <div class="carousel-inner">
        {% for photo in photos %}
          <div {% if forloop.first %} class="item active" {% else %} class="item"{% endif %}> <!-- class of active since it's the first item --> 
            <img src="{{ MEDIA_URL }}{{ photo.url }}" alt="" />
            <div class="carousel-caption">
            </div>
          </div>
        {% endfor %}
      </div><!-- /.carousel-inner -->
      <!--  Next and Previous controls below
            href values must reference the id for this carousel -->
      <a class="carousel-control left" href="#this-carousel-id" data-slide="prev">&lsaquo;</a>
      <a class="carousel-control right" href="#this-carousel-id" data-slide="next">&rsaquo;</a>
    </div><!-- /.carousel -->


    <div class="l-description l-entry">
      {{listing.description|linebreaks}}
    </div>
  </div> <!-- /container -->
</div>
<!-- Preview Page -->




<div class="edit" style="display:none">
  <div class="listing-edit">
    <form method="POST" action="" enctype="multipart/form-data">
      {% csrf_token %}
      <ul class="form">
        <li>
          <input id="id_title" maxlength="200" name="title" type="text" value="{{listing.title}}" class="required">
        </li>
          <textarea cols="40" id="id_description" name="description" rows="10">
            {{listing.description}}
          </textarea>
        </li>
          <input id="id_price" name="price" type="text" value="{{listing.price}}">
        </li>
        <li>
          <input id="id_location" maxlength="200" name="location" type="text" value="{{listing.location}}">
        </li>
        <li>
          <input id="id_pictures" maxlength="200" name="pictures" type="text" value="{{listing.pictures}}">
        </li>
        <li>
          <select id="id_category" name="category">
            <option value="1" selected="selected">{{listing.category}}</option>
          </select>
        </li>
        <li>
          <select id="id_listing_type" name="listing_type">
            <option value="1" selected="selected">{{listing.listing_type}}</option>
          </select>
        </li>
        <li>
          <select id="id_status" name="status">
            <option value="3" selected="selected">Sold</option>
          </select>
        </li>
        <li>
          <select id="id_user" name="user">
            <option value="1" selected="selected">moore</option>
          </select>
        </li>
        <li>
          <div>
            <label for="id_CL_link">CL link:</label>
            <input class="vURLField" id="id_CL_link" maxlength="200" name="CL_link" type="text">
          </div>
        </li>
        <br>
        <li>
          <input type="submit" value="Save" class="btn">
        </li>
      </ul>
    </form>
  </div>
</div>


<!-- Edit Page
<div class="edit" style="display:none">
  <div class="listing-edit">
      <form method="POST" action="">
          {% csrf_token %}
          <div class="l-header">
              <h1 class="l-title">
                  <fieldset>
                      <input id="id_title" name="title" type="text" value="{{listing.title}}">
                      <input id="id_price" name="price" type="text" value="{{listing.price}}">
                      <input id="id_location" name="location" type="text" value="{{listing.location}}">
                  </fieldset>
              </h1>
          </div>
          {% include "listings_specs.html" %}

          <ul class="form">
              <li>
                  <textarea cols="60" id="id_description" name="description" rows="10">{{listing.description}}</textarea>
              </li>
              <li>
                  <select id="id_category" name="category" style="display:none">
                      <option value="1" selected="selected">
                        {{listing.category}}
                      </option>
                  </select>
              </li>
              <li>
                <textarea cols="60" id="id_pictures" name="pictures" rows="10" style="display:none">
                  {{listing.pictures}}
                </textarea>
              </li>
              <li>
                  <select id="id_listing_type" name="listing_type" style="display:none">
                      <option value="1" selected="selected">{{listing.listing_type}}</option>
                  </select>
              </li>
              <br>
              <button type="button" class="btn btn-primary" onclick='fileUpload()'>Upload More Pictures Here</button>
              <li>
                  <input class="btn" type="submit" value="Update">
              </li>
          </ul>
      </form>
  </div>
</div>
</div>
End Edit Page -->



<div class="l-footnote" style ="margin-left:55px;">
  Created with 
  <a href="http://www.rocketlistings.com" class="icon">
    Rocket Listings
  </a>
  . Blast off.
</div>

<div class="clearfix"></div>


    <!-- Le javascript
    ================================================== -->
    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.7.2.min.js"><\/script>')</script>
    <!-- Bootstrap jQuery plugins compiled and minified -->
    <script src="js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function(){
        $('.carousel').carousel({
          interval: 10000
        });
    })
    </script>
  {% endblock %}
