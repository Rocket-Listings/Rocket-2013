{% load static from staticfiles %}
{% load humanize %}
{# Requires the context variable 'listings' #}	
{# Requires the context variable 'buyers' #}	

<div class="buyers-header">
	<ul>
		<li class="d-buyer-title">Buyers</li>
	</ul>
</div>
<div class="buyers-body">
	{% for buyer in buyers %}
	<ul class="buyer-card listing-{{ buyer.listing.id }} hide" data-buyer-id="{{ buyer.id }}" data-listing-id="{{ buyer.listing.id }}">
		<li>{{ buyer.name }}</li>
		<li>{% if buyer.max_offer %}Offering ${{ buyer.max_offer }}{% else %}No offer{% endif %}</li>
		<li>{{ buyer.last_message.date|naturaltime }}</li>
	</ul>
	{% endfor %}
</div>

<script id="new-buyer" type="text/template">
{% verbatim %}
	{{#buyers}}
	<ul class="buyer-card listing-{{ listing_id }} hide" data-buyer-id="{{ buyer_id }}" data-listing-id="{{ listing_id }}">
		<li>{{ name }}</li>
		<li>{{#max_offer}}{{max_offer}}{{/max_offer}}{{^max_offer}}No offer{{/max_offer}}</li>
		<li>{{ last_message_date }}</li>
	</ul>
	{{/buyers}}
{% endverbatim %}
</script>