{% load static from staticfiles %}
{% load specval %}
<h3 class="listing-title">{{ form.title.value|default:"Create a Listing" }}</h3>
{# {{ formset.as_p }} #}

{% for hidden in formset.hidden_fields %}
  {{ hidden }}
{% endfor %}

{% if photo_formset.total_form_count > 0 %}
<style> .upload-view { display: none; }</style>
{% else %}
<style> .photo-view { display: none; }</style>
{% endif %}

<form method="POST" class="listing-form">

  {% csrf_token %}

  {# Hidden fields #}
  {% for hidden in form.hidden_fields %}{{ hidden }}{% endfor %}

  {# Category Select #}
  <fieldset>
    <legend>Category</legend>
    {% for error in form.category.errors %}
    <div class="alert alert-danger">
      <p>{{ error }}</p>
    </div>
    {% endfor %}
    <ul class="nav nav-tabs">
      <li class="active">
        <a href="#forsale" data-toggle="tab">For Sale</a>
      </li>
      <li>
        <a href="#housing" data-toggle="tab">Housing</a>
      </li>
    </ul>
    <div class="tab-content">
      {% for group, cat_list in cats.items %}
      <div class="tab-pane cat-pane {% if group == "forsale" %} active{% endif %}" id="{{ group }}">
        <div class="row">
          <div class="col-lg-2 col-sm-4 col-3">
          {% for cat in cat_list %}
              <a class="cat {{ group }}" data-id="{{ cat.id }}">{{ cat.name }}</a>
            {% if group == "forsale" and forloop.counter|divisibleby:6 or group == "housing" and forloop.counter|divisibleby:3 %}
              </div><div class="col-lg-2">
            {% endif %}
          {% endfor %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </fieldset>

  {# First form row #}
  <fieldset><legend>Listing Info</legend>
    {# Title #}
    <div class="row">
      <div class="col-sm-9 form-group {% if form.title.errors %} has-error {% endif %}">
        
        <label class="control-label" for="id_title">{{ form.title.label }}</label>
        <input id="id_title" class="title form-control" maxlength="200" name="title" type="text" placeholder="2000 Jeep Wrangler 4.0L" value="{{ form.title.value|default:"" }}">

        {% for error in form.title.errors %}
          <span class="help-block">{{ error }}</span>
        {% endfor %}
      </div>
      <div class="col-sm-3 form-group {% if form.price.errors %} has-error {% endif %}">
        <label for="id_price" class="control-label">{{ form.price.label }}</label>
        <div class="input-group">
          <span class="input-group-addon">$</span>
          <input id="id_price" class="price form-control" name="price" type="text" placeholder="666" value="{{ form.price.value|default:"" }}">
        </div>
        {% for error in form.price.errors %}<span class="help-block">{{ error }}</span>{% endfor %}
      </div>
    </div>
    <div class="row">
      <div class="form-group col-lg-12{% if form.description.errors %} has-error {% endif %}">
        <label class="control-label" for="id_description">{{ form.description.label }}</label>
        <textarea id="id_description" class="description form-control" placeholder="The best car ever." name="description" rows="5">{{ form.description.value|default:"" }}</textarea>
        {% for error in form.price.errors %}<span class="help-block">{{ error }}</span>{% endfor %}
      </div>
    </div>
  </fieldset>
  <fieldset><legend>Marketplace</legend>
    <div class = "row">
      <div id="market-col" class="col-lg-6">
        <select class= "form-select" name = "market">
          <option value="sfo" >Sf Bay Area</option>
          <option value="abz" >Aberdeen</option>
          <option value="abi" >Abilene</option>
          <option value="aca" >Acapulco</option>
          <option value="adl" >Adelaide</option>
          <option value="amd" >Ahmedabad</option>
          <option value="cak" >Akron / Canton</option>
          <option value="alb" >Albany</option>
          <option value="aby" >Albany, Ga</option>
          <option value="abq" >Albuquerque</option>
          <option value="alc" >Alicante</option>
          <option value="aoo" >Altoona-johnstown</option>
          <option value="ama" >Amarillo</option>
          <option value="ame" >Ames, Ia</option>
          <option value="ams" >Amsterdam / Randstad</option>
          <option value="anc" >Anchorage / Mat-su</option>
          <option value="aaa" >Ann Arbor</option>
          <option value="anp" >Annapolis</option>
          <option value="app" >Appleton-oshkosh-fdl</option>
          <option value="ash" >Asheville</option>
          <option value="jfn" >Ashtabula</option>
          <option value="ahn" >Athens, Ga</option>
          <option value="ohu" >Athens, Oh</option>
          <option value="atl" >Atlanta</option>
          <option value="aub" >Auburn</option>
          <option value="akl" >Auckland, Nz</option>
          <option value="aug" >Augusta</option>
          <option value="aus" >Austin</option>
          <option value="bcd" >Bacolod</option>
          <option value="bcs" >Baja California Sur</option>
          <option value="bak" >Bakersfield</option>
          <option value="ibz" >Baleares</option>
          <option value="bal" >Baltimore</option>
          <option value="bng" >Bangalore</option>
          <option value="bgl" >Bangladesh</option>
          <option value="bar" >Barcelona</option>
          <option value="brr" >Barrie</option>
          <option value="bsl" >Basel</option>
          <option value="bth" >Bath</option>
          <option value="btr" >Baton Rouge</option>
          <option value="btc" >Battle Creek</option>
          <option value="bpt" >Beaumont / Port Arthur</option>
          <option value="pek" >Beijing</option>
          <option value="bey" >Beirut, Lebanon</option>
          <option value="blf" >Belfast</option>
          <option value="bru" >Belgium</option>
          <option value="bel" >Belleville, On</option>
          <option value="bli" >Bellingham</option>
          <option value="cnf" >Belo Horizonte</option>
          <option value="bji" >Bemidji</option>
          <option value="bnd" >Bend</option>
          <option value="ber" >Berlin</option>
          <option value="brn" >Bern</option>
          <option value="bbi" >Bhubaneswar</option>
          <option value="wnp" >Bicol Region</option>
          <option value="bio" >Bilbao</option>
          <option value="bil" >Billings</option>
          <option value="bgm" >Binghamton</option>
          <option value="bhx" >Birmingham / West Mids</option>
          <option value="bhm" >Birmingham, Al</option>
          <option value="bis" >Bismarck</option>
          <option value="bmg" >Bloomington, In</option>
          <option value="bln" >Bloomington-normal</option>
          <option value="boi" >Boise</option>
          <option value="lpb" >Bolivia</option>
          <option value="blq" >Bologna</option>
          <option value="bnc" >Boone</option>
          <option value="bod" >Bordeaux</option>
          <option value="bos" >Boston</option>
          <option value="bou" >Boulder</option>
          <option value="blg" >Bowling Green</option>
          <option value="bzn" >Bozeman</option>
          <option value="brd" >Brainerd</option>
          <option value="bfd" >Brantford-woodstock</option>
          <option value="bsb" >Brasilia</option>
          <option value="brm" >Bremen</option>
          <option value="bri" >Brighton</option>
          <option value="bne" >Brisbane</option>
          <option value="brs" >Bristol</option>
          <option value="rns" >Brittany</option>
          <option value="bro" >Brownsville</option>
          <option value="bwk" >Brunswick, Ga</option>
          <option value="bud" >Budapest</option>
          <option value="bue" >Buenos Aires</option>
          <option value="buf" >Buffalo</option>
          <option value="sof" >Bulgaria</option>
          <option value="btm" >Butte</option>
          <option value="cdz" >Cadiz</option>
          <option value="cdo" >Cagayan De Oro</option>
          <option value="cns" >Cairns</option>
          <option value="clg" >Calgary</option>
          <option value="cam" >Cambridge, Uk</option>
          <option value="tfn" >Canarias</option>
          <option value="cbr" >Canberra</option>
          <option value="cap" >Cape Cod / Islands</option>
          <option value="cpt" >Cape Town</option>
          <option value="cym" >Cardiff / Wales</option>
          <option value="crb" >Caribbean Islands</option>
          <option value="cbo" >Cariboo</option>
          <option value="cat" >Catskills</option>
          <option value="ceb" >Cebu</option>
          <option value="ced" >Cedar Rapids</option>
          <option value="cnj" >Central Nj</option>
          <option value="aex" >Central Louisiana</option>
          <option value="cmu" >Central Michigan</option>
          <option value="chm" >Champaign Urbana</option>
          <option value="ixc" >Chandigarh</option>
          <option value="chs" >Charleston, Sc</option>
          <option value="crw" >Charleston, Wv</option>
          <option value="cha" >Charlotte</option>
          <option value="uva" >Charlottesville</option>
          <option value="chk" >Chatham-kent</option>
          <option value="cht" >Chattanooga</option>
          <option value="chq" >Chautauqua</option>
          <option value="ctu" >Chengdu</option>
          <option value="che" >Chennai (madras)</option>
          <option value="chi" >Chicago</option>
          <option value="chc" >Chico</option>
          <option value="chh" >Chihuahua</option>
          <option value="scl" >Chile</option>
          <option value="chl" >Chillicothe</option>
          <option value="ckg" >Chongqing</option>
          <option value="chr" >Christchurch</option>
          <option value="cin" >Cincinnati, Oh</option>
          <option value="cjs" >Ciudad Juarez</option>
          <option value="ckv" >Clarksville, Tn</option>
          <option value="cle" >Cleveland</option>
          <option value="cvn" >Clovis / Portales</option>
          <option value="cst" >College Station</option>
          <option value="cgn" >Cologne</option>
          <option value="bog" >Colombia</option>
          <option value="cos" >Colorado Springs</option>
          <option value="cou" >Columbia / Jeff City</option>
          <option value="cae" >Columbia, Sc</option>
          <option value="col" >Columbus</option>
          <option value="csg" >Columbus, Ga</option>
          <option value="cmx" >Comox Valley</option>
          <option value="coo" >Cookeville</option>
          <option value="cop" >Copenhagen</option>
          <option value="ycc" >Cornwall, On</option>
          <option value="crp" >Corpus Christi</option>
          <option value="crv" >Corvallis/albany</option>
          <option value="cri" >Costa Rica</option>
          <option value="cov" >Coventry</option>
          <option value="zag" >Croatia</option>
          <option value="cbg" >Cumberland Valley</option>
          <option value="cwb" >Curitiba</option>
          <option value="dlc" >Dalian</option>
          <option value="dal" >Dallas / Fort Worth</option>
          <option value="dnv" >Danville</option>
          <option value="drw" >Darwin</option>
          <option value="dvo" >Davao City</option>
          <option value="day" >Dayton / Springfield</option>
          <option value="dab" >Daytona Beach</option>
          <option value="dil" >Decatur, Il</option>
          <option value="och" >Deep East Texas</option>
          <option value="drt" >Del Rio / Eagle Pass</option>
          <option value="dlw" >Delaware</option>
          <option value="del" >Delhi</option>
          <option value="den" >Denver</option>
          <option value="dby" >Derby</option>
          <option value="dsm" >Des Moines</option>
          <option value="det" >Detroit Metro</option>
          <option value="dvc" >Devon &amp; Cornwall</option>
          <option value="sdq" >Dominican Republic</option>
          <option value="dhn" >Dothan, Al</option>
          <option value="drs" >Dresden</option>
          <option value="dub" >Dublin</option>
          <option value="dbq" >Dubuque</option>
          <option value="dlh" >Duluth / Superior</option>
          <option value="dnd" >Dundee</option>
          <option value="dud" >Dunedin</option>
          <option value="dur" >Durban</option>
          <option value="dus" >Dusseldorf</option>
          <option value="nwh" >East Anglia</option>
          <option value="eid" >East Idaho</option>
          <option value="eml" >East Midlands</option>
          <option value="eor" >East Oregon</option>
          <option value="eco" >Eastern Co</option>
          <option value="nlo" >Eastern Ct</option>
          <option value="enc" >Eastern Nc</option>
          <option value="eky" >Eastern Kentucky</option>
          <option value="mnt" >Eastern Montana</option>
          <option value="ewv" >Eastern Panhandle</option>
          <option value="esh" >Eastern Shore</option>
          <option value="eau" >Eau Claire</option>
          <option value="qui" >Ecuador</option>
          <option value="edi" >Edinburgh</option>
          <option value="edm" >Edmonton</option>
          <option value="cai" >Egypt</option>
          <option value="elp" >El Paso</option>
          <option value="sal" >El Salvador</option>
          <option value="elk" >Elko</option>
          <option value="elm" >Elmira-corning</option>
          <option value="eri" >Erie, Pa</option>
          <option value="ess" >Essen / Ruhr</option>
          <option value="esx" >Essex</option>
          <option value="add" >Ethiopia</option>
          <option value="eug" >Eugene</option>
          <option value="evv" >Evansville</option>
          <option value="fai" >Fairbanks</option>
          <option value="far" >Fargo / Moorhead</option>
          <option value="fnm" >Farmington, Nm</option>
          <option value="fro" >Faro / Algarve</option>
          <option value="fay" >Fayetteville</option>
          <option value="fyv" >Fayetteville, Ar</option>
          <option value="fgl" >Finger Lakes</option>
          <option value="hel" >Finland</option>
          <option value="flg" >Flagstaff / Sedona</option>
          <option value="fnt" >Flint</option>
          <option value="msl" >Florence / Muscle Shoals</option>
          <option value="flr" >Florence / Tuscany</option>
          <option value="flo" >Florence, Sc</option>
          <option value="key" >Florida Keys</option>
          <option value="ftc" >Fort Collins / North Co</option>
          <option value="ftd" >Fort Dodge</option>
          <option value="fsm" >Fort Smith, Ar</option>
          <option value="fwa" >Fort Wayne</option>
          <option value="ftl" >Fortaleza</option>
          <option value="fra" >Frankfurt</option>
          <option value="abb" >Fraser Valley</option>
          <option value="fdk" >Frederick</option>
          <option value="ezf" >Fredericksburg</option>
          <option value="fre" >Fresno / Madera</option>
          <option value="fmc" >Ft Mcmurray</option>
          <option value="fmy" >Ft Myers / Sw Florida</option>
          <option value="fuk" >Fukuoka</option>
          <option value="anb" >Gadsden-anniston</option>
          <option value="gnv" >Gainesville</option>
          <option value="gls" >Galveston</option>
          <option value="gva" >Geneva</option>
          <option value="gen" >Genoa</option>
          <option value="acc" >Ghana</option>
          <option value="gla" >Glasgow</option>
          <option value="gfl" >Glens Falls</option>
          <option value="goa" >Goa</option>
          <option value="ool" >Gold Coast</option>
          <option value="gld" >Gold Country</option>
          <option value="grx" >Granada</option>
          <option value="gfk" >Grand Forks</option>
          <option value="gil" >Grand Island</option>
          <option value="grr" >Grand Rapids</option>
          <option value="gtf" >Great Falls</option>
          <option value="ath" >Greece</option>
          <option value="grb" >Green Bay</option>
          <option value="gbo" >Greensboro</option>
          <option value="gsp" >Greenville / Upstate</option>
          <option value="gnb" >Grenoble</option>
          <option value="gdl" >Guadalajara</option>
          <option value="gum" >Guam-micronesia</option>
          <option value="bjx" >Guanajuato</option>
          <option value="can" >Guangzhou</option>
          <option value="gua" >Guatemala</option>
          <option value="gph" >Guelph</option>
          <option value="gpt" >Gulfport / Biloxi</option>
          <option value="hfa" >Haifa</option>
          <option value="hfx" >Halifax</option>
          <option value="ham" >Hamburg</option>
          <option value="hml" >Hamilton-burlington</option>
          <option value="sou" >Hampshire</option>
          <option value="nfk" >Hampton Roads</option>
          <option value="hnf" >Hanford-corcoran</option>
          <option value="hgh" >Hangzhou</option>
          <option value="haj" >Hannover</option>
          <option value="hrs" >Harrisburg</option>
          <option value="shd" >Harrisonburg</option>
          <option value="htf" >Hartford</option>
          <option value="usm" >Hattiesburg</option>
          <option value="hnl" >Hawaii</option>
          <option value="cfl" >Heartland Florida</option>
          <option value="hdb" >Heidelberg</option>
          <option value="hln" >Helena</option>
          <option value="hrm" >Hermosillo</option>
          <option value="hky" >Hickory / Lenoir</option>
          <option value="rck" >High Rockies</option>
          <option value="hhi" >Hilton Head</option>
          <option value="hij" >Hiroshima</option>
          <option value="hld" >Holland</option>
          <option value="hkg" >Hong Kong</option>
          <option value="hum" >Houma</option>
          <option value="hou" >Houston</option>
          <option value="hud" >Hudson Valley</option>
          <option value="hmb" >Humboldt County</option>
          <option value="hts" >Huntington-ashland</option>
          <option value="hsv" >Huntsville / Decatur</option>
          <option value="hyd" >Hyderabad</option>
          <option value="ilo" >Iloilo</option>
          <option value="imp" >Imperial County</option>
          <option value="ind" >Indianapolis</option>
          <option value="jkt" >Indonesia</option>
          <option value="idr" >Indore</option>
          <option value="inl" >Inland Empire</option>
          <option value="iac" >Iowa City</option>
          <option value="trh" >Iran</option>
          <option value="bgd" >Iraq</option>
          <option value="ith" >Ithaca</option>
          <option value="jxn" >Jackson, Mi</option>
          <option value="jan" >Jackson, Ms</option>
          <option value="jxt" >Jackson, Tn</option>
          <option value="jax" >Jacksonville</option>
          <option value="oaj" >Jacksonville, Nc</option>
          <option value="jai" >Jaipur</option>
          <option value="jvl" >Janesville</option>
          <option value="jys" >Jersey Shore</option>
          <option value="jrs" >Jerusalem</option>
          <option value="jnb" >Johannesburg</option>
          <option value="jbr" >Jonesboro</option>
          <option value="jln" >Joplin</option>
          <option value="klt" >Kaiserslautern</option>
          <option value="kzo" >Kalamazoo</option>
          <option value="fca" >Kalispell</option>
          <option value="kml" >Kamloops</option>
          <option value="ksc" >Kansas City, Mo</option>
          <option value="kel" >Kelowna / Okanagan</option>
          <option value="ena" >Kenai Peninsula</option>
          <option value="kpr" >Kennewick-pasco-richland</option>
          <option value="rac" >Kenosha-racine</option>
          <option value="ken" >Kent</option>
          <option value="nbo" >Kenya</option>
          <option value="cok" >Kerala</option>
          <option value="grk" >Killeen / Temple / Ft Hood</option>
          <option value="kng" >Kingston, On</option>
          <option value="krk" >Kirksville</option>
          <option value="kch" >Kitchener-waterloo-cambridge</option>
          <option value="klf" >Klamath Falls</option>
          <option value="knx" >Knoxville</option>
          <option value="okk" >Kokomo</option>
          <option value="kol" >Kolkata (calcutta)</option>
          <option value="koo" >Kootenays</option>
          <option value="kwi" >Kuwait</option>
          <option value="lse" >La Crosse</option>
          <option value="lsl" >La Salle Co</option>
          <option value="lft" >Lafayette</option>
          <option value="laf" >Lafayette / West Lafayette</option>
          <option value="lkc" >Lake Charles</option>
          <option value="loz" >Lake Of The Ozarks</option>
          <option value="lal" >Lakeland</option>
          <option value="lns" >Lancaster, Pa</option>
          <option value="lan" >Lansing</option>
          <option value="lrd" >Laredo</option>
          <option value="lcr" >Las Cruces</option>
          <option value="lvg" >Las Vegas</option>
          <option value="lau" >Lausanne</option>
          <option value="lwr" >Lawrence</option>
          <option value="law" >Lawton</option>
          <option value="lds" >Leeds</option>
          <option value="alt" >Lehigh Valley</option>
          <option value="lej" >Leipzig</option>
          <option value="lth" >Lethbridge</option>
          <option value="lws" >Lewiston / Clarkston</option>
          <option value="lex" >Lexington, Ky</option>
          <option value="lil" >Lille</option>
          <option value="lma" >Lima / Findlay</option>
          <option value="lnk" >Lincoln</option>
          <option value="lis" >Lisbon</option>
          <option value="lit" >Little Rock</option>
          <option value="liv" >Liverpool</option>
          <option value="lgu" >Logan</option>
          <option value="nte" >Loire Valley</option>
          <option value="ldn" >London</option>
          <option value="lon" >London, On</option>
          <option value="isp" >Long Island</option>
          <option value="lax" >Los Angeles</option>
          <option value="lou" >Louisville</option>
          <option value="lbb" >Lubbock</option>
          <option value="lko" >Lucknow</option>
          <option value="lux" >Luxembourg</option>
          <option value="lyn" >Lynchburg</option>
          <option value="lys" >Lyon</option>
          <option value="mcn" >Macon / Warner Robins</option>
          <option value="mad" >Madison</option>
          <option value="mdd" >Madrid</option>
          <option value="mne" >Maine</option>
          <option value="agp" >Malaga</option>
          <option value="mly" >Malaysia</option>
          <option value="man" >Manchester</option>
          <option value="mhk" >Manhattan, Ks</option>
          <option value="mnl" >Manila</option>
          <option value="mkt" >Mankato</option>
          <option value="mfd" >Mansfield</option>
          <option value="mrs" >Marseille</option>
          <option value="msc" >Mason City</option>
          <option value="mto" >Mattoon-charleston</option>
          <option value="mzt" >Mazatlan</option>
          <option value="mca" >Mcallen / Edinburg</option>
          <option value="mdv" >Meadville</option>
          <option value="mfr" >Medford-ashland</option>
          <option value="hat" >Medicine Hat</option>
          <option value="mel" >Melbourne</option>
          <option value="mem" >Memphis, Tn</option>
          <option value="mdo" >Mendocino County</option>
          <option value="mer" >Merced</option>
          <option value="mei" >Meridian</option>
          <option value="mex" >Mexico City</option>
          <option value="mxp" >Milan</option>
          <option value="mil" >Milwaukee</option>
          <option value="min" >Minneapolis / St Paul</option>
          <option value="mso" >Missoula</option>
          <option value="mob" >Mobile</option>
          <option value="mod" >Modesto</option>
          <option value="mhv" >Mohave County</option>
          <option value="mnr" >Monroe</option>
          <option value="mlu" >Monroe, La</option>
          <option value="mtb" >Monterey Bay</option>
          <option value="mty" >Monterrey</option>
          <option value="mvd" >Montevideo</option>
          <option value="mgm" >Montgomery</option>
          <option value="mpl" >Montpellier</option>
          <option value="mon" >Montreal</option>
          <option value="wvu" >Morgantown</option>
          <option value="cas" >Morocco</option>
          <option value="mos" >Moscow</option>
          <option value="mlk" >Moses Lake</option>
          <option value="mum" >Mumbai</option>
          <option value="mun" >Muncie / Anderson</option>
          <option value="muc" >Munich</option>
          <option value="mkg" >Muskegon</option>
          <option value="myr" >Myrtle Beach</option>
          <option value="ngo" >Nagoya</option>
          <option value="nmo" >Nanaimo</option>
          <option value="nkg" >Nanjing</option>
          <option value="nap" >Napoli / Campania</option>
          <option value="nsh" >Nashville</option>
          <option value="nbw" >New Brunswick</option>
          <option value="nhm" >New Hampshire</option>
          <option value="hvn" >New Haven</option>
          <option value="nor" >New Orleans</option>
          <option value="vpi" >New River Valley</option>
          <option value="nyc" >New York City</option>
          <option value="ncl" >Newcastle / Ne England</option>
          <option value="ntl" >Newcastle, Nsw</option>
          <option value="nsc" >Niagara Region</option>
          <option value="mga" >Nicaragua</option>
          <option value="nce" >Nice / Cote D'azur</option>
          <option value="rou" >Normandy</option>
          <option value="lcq" >North Central Fl</option>
          <option value="ndk" >North Dakota</option>
          <option value="njy" >North Jersey</option>
          <option value="nms" >North Mississippi</option>
          <option value="lbf" >North Platte</option>
          <option value="abr" >Northeast Sd</option>
          <option value="nwi" >Northern Wi</option>
          <option value="nmi" >Northern Michigan</option>
          <option value="whl" >Northern Panhandle</option>
          <option value="nct" >Northwest Ct</option>
          <option value="nwg" >Northwest Ga</option>
          <option value="nwk" >Northwest Ks</option>
          <option value="end" >Northwest Ok</option>
          <option value="osl" >Norway</option>
          <option value="not" >Nottingham</option>
          <option value="nue" >Nuremberg</option>
          <option value="oax" >Oaxaca</option>
          <option value="oca" >Ocala</option>
          <option value="odm" >Odessa / Midland</option>
          <option value="ogd" >Ogden-clearfield</option>
          <option value="vps" >Okaloosa / Walton</option>
          <option value="oka" >Okinawa</option>
          <option value="okc" >Oklahoma City</option>
          <option value="olp" >Olympic Peninsula</option>
          <option value="oma" >Omaha / Council Bluffs</option>
          <option value="onh" >Oneonta</option>
          <option value="orc" >Orange County</option>
          <option value="cor" >Oregon Coast</option>
          <option value="orl" >Orlando</option>
          <option value="osa" >Osaka-kobe-kyoto</option>
          <option value="ott" >Ottawa-hull-gatineau</option>
          <option value="obx" >Outer Banks</option>
          <option value="ows" >Owen Sound</option>
          <option value="owb" >Owensboro</option>
          <option value="oxf" >Oxford</option>
          <option value="pak" >Pakistan</option>
          <option value="psp" >Palm Springs, Ca</option>
          <option value="crk" >Pampanga</option>
          <option value="pan" >Panama</option>
          <option value="pfn" >Panama City, Fl</option>
          <option value="par" >Paris</option>
          <option value="pkb" >Parkersburg-marietta</option>
          <option value="pax" >Peace River Country</option>
          <option value="pns" >Pensacola</option>
          <option value="pia" >Peoria</option>
          <option value="per" >Perth</option>
          <option value="lim" >Peru</option>
          <option value="peg" >Perugia</option>
          <option value="ypq" >Peterborough</option>
          <option value="phi" >Philadelphia</option>
          <option value="phx" >Phoenix</option>
          <option value="csd" >Pierre / Central Sd</option>
          <option value="pit" >Pittsburgh</option>
          <option value="plb" >Plattsburgh-adirondacks</option>
          <option value="poc" >Poconos</option>
          <option value="waw" >Poland</option>
          <option value="phn" >Port Huron</option>
          <option value="pdx" >Portland, Or</option>
          <option value="pto" >Porto</option>
          <option value="pgp" >Porto Alegre</option>
          <option value="ptd" >Potsdam-canton-massena</option>
          <option value="prg" >Prague</option>
          <option value="prc" >Prescott</option>
          <option value="hpr" >Pretoria</option>
          <option value="pei" >Prince Edward Island</option>
          <option value="yxs" >Prince George</option>
          <option value="pvu" >Provo / Orem</option>
          <option value="pbl" >Puebla</option>
          <option value="pub" >Pueblo</option>
          <option value="pri" >Puerto Rico</option>
          <option value="pvr" >Puerto Vallarta</option>
          <option value="plm" >Pullman / Moscow</option>
          <option value="pnq" >Pune</option>
          <option value="mli" >Quad Cities, Ia/il</option>
          <option value="qbc" >Quebec City</option>
          <option value="ral" >Raleigh / Durham / Ch</option>
          <option value="rap" >Rapid City / West Sd</option>
          <option value="rea" >Reading</option>
          <option value="rec" >Recife</option>
          <option value="red" >Red Deer</option>
          <option value="rdd" >Redding</option>
          <option value="reg" >Regina</option>
          <option value="rno" >Reno / Tahoe</option>
          <option value="rkv" >Reykjavik</option>
          <option value="prv" >Rhode Island</option>
          <option value="ric" >Richmond</option>
          <option value="rin" >Richmond, In</option>
          <option value="rio" >Rio De Janeiro</option>
          <option value="roa" >Roanoke</option>
          <option value="rmn" >Rochester, Mn</option>
          <option value="rcs" >Rochester, Ny</option>
          <option value="rfd" >Rockford</option>
          <option value="buh" >Romania</option>
          <option value="rom" >Rome</option>
          <option value="rbg" >Roseburg</option>
          <option value="row" >Roswell / Carlsbad</option>
          <option value="sac" >Sacramento</option>
          <option value="mbs" >Saginaw-midland-baycity</option>
          <option value="sgy" >Saguenay</option>
          <option value="sle" >Salem, Or</option>
          <option value="sns" >Salina</option>
          <option value="slc" >Salt Lake City</option>
          <option value="ssa" >Salvador, Bahia</option>
          <option value="sjt" >San Angelo</option>
          <option value="sat" >San Antonio</option>
          <option value="sdo" >San Diego</option>
          <option value="slo" >San Luis Obispo</option>
          <option value="tsu" >San Marcos</option>
          <option value="sky" >Sandusky</option>
          <option value="sba" >Santa Barbara</option>
          <option value="saf" >Santa Fe / Taos</option>
          <option value="smx" >Santa Maria</option>
          <option value="spo" >Sao Paulo</option>
          <option value="spp" >Sapporo</option>
          <option value="srq" >Sarasota-bradenton</option>
          <option value="srd" >Sardinia</option>
          <option value="srn" >Sarnia</option>
          <option value="skt" >Saskatoon</option>
          <option value="soo" >Sault Ste Marie, On</option>
          <option value="sav" >Savannah / Hinesville</option>
          <option value="bff" >Scottsbluff / Panhandle</option>
          <option value="avp" >Scranton / Wilkes-barre</option>
          <option value="sea" >Seattle-tacoma</option>
          <option value="sdj" >Sendai</option>
          <option value="sel" >Seoul</option>
          <option value="sev" >Sevilla</option>
          <option value="sha" >Shanghai</option>
          <option value="sbm" >Sheboygan, Wi</option>
          <option value="shf" >Sheffield</option>
          <option value="she" >Shenyang</option>
          <option value="szx" >Shenzhen</option>
          <option value="shb" >Sherbrooke</option>
          <option value="sow" >Show Low</option>
          <option value="shv" >Shreveport</option>
          <option value="sic" >Sicilia</option>
          <option value="fhu" >Sierra Vista</option>
          <option value="sng" >Singapore</option>
          <option value="sux" >Sioux City, Ia</option>
          <option value="fsd" >Sioux Falls / Se Sd</option>
          <option value="ssk" >Siskiyou County</option>
          <option value="mvw" >Skagit / Island / Sji</option>
          <option value="ske" >Skeena-bulkley</option>
          <option value="sbn" >South Bend / Michiana</option>
          <option value="sma" >South Coast</option>
          <option value="sdk" >South Dakota</option>
          <option value="mia" >South Florida</option>
          <option value="snj" >South Jersey</option>
          <option value="otu" >Southeast Ia</option>
          <option value="sek" >Southeast Ks</option>
          <option value="jnu" >Southeast Alaska</option>
          <option value="smo" >Southeast Missouri</option>
          <option value="swv" >Southern Wv</option>
          <option value="cbd" >Southern Illinois</option>
          <option value="smd" >Southern Maryland</option>
          <option value="swk" >Southwest Ks</option>
          <option value="mml" >Southwest Mn</option>
          <option value="hez" >Southwest Ms</option>
          <option value="wtx" >Southwest Tx</option>
          <option value="vaw" >Southwest Va</option>
          <option value="swm" >Southwest Michigan</option>
          <option value="mlb" >Space Coast</option>
          <option value="spk" >Spokane / Coeur D'alene</option>
          <option value="spi" >Springfield, Il</option>
          <option value="sgf" >Springfield, Mo</option>
          <option value="ust" >St Augustine</option>
          <option value="stc" >St Cloud</option>
          <option value="stg" >St George</option>
          <option value="nfl" >St John's, Nl</option>
          <option value="stj" >St Joseph</option>
          <option value="stl" >St Louis, Mo</option>
          <option value="stp" >St Petersburg, Ru</option>
          <option value="psu" >State College</option>
          <option value="tbr" >Statesboro</option>
          <option value="osu" >Stillwater</option>
          <option value="stk" >Stockton</option>
          <option value="sxb" >Strasbourg</option>
          <option value="str" >Stuttgart</option>
          <option value="sud" >Sudbury</option>
          <option value="sun" >Sunshine Coast</option>
          <option value="svt" >Surat Surat</option>
          <option value="ssn" >Susanville</option>
          <option value="sth" >Sweden</option>
          <option value="syd" >Sydney</option>
          <option value="syr" >Syracuse</option>
          <option value="twd" >Taiwan</option>
          <option value="tal" >Tallahassee</option>
          <option value="tpa" >Tampa Bay Area</option>
          <option value="hba" >Tasmania</option>
          <option value="tlv" >Tel Aviv</option>
          <option value="tha" >Terre Haute</option>
          <option value="toc" >Territories</option>
          <option value="txk" >Texarkana</option>
          <option value="txm" >Texoma</option>
          <option value="bkk" >Thailand</option>
          <option value="thb" >The Thumb</option>
          <option value="tby" >Thunder Bay</option>
          <option value="tij" >Tijuana</option>
          <option value="tok" >Tokyo</option>
          <option value="tol" >Toledo</option>
          <option value="tpk" >Topeka</option>
          <option value="trn" >Torino</option>
          <option value="tor" >Toronto</option>
          <option value="tls" >Toulouse</option>
          <option value="psl" >Treasure Coast</option>
          <option value="tri" >Tri-cities, Tn</option>
          <option value="trs" >Trois-rivieres</option>
          <option value="tus" >Tucson</option>
          <option value="tul" >Tulsa</option>
          <option value="tun" >Tunisia</option>
          <option value="ist" >Turkey</option>
          <option value="tsc" >Tuscaloosa</option>
          <option value="nph" >Tuscarawas Co</option>
          <option value="twf" >Twin Falls</option>
          <option value="tts" >Twin Tiers Ny/pa</option>
          <option value="etx" >Tyler / East Tx</option>
          <option value="kbp" >Ukraine</option>
          <option value="uae" >United Arab Emirates</option>
          <option value="yup" >Upper Peninsula</option>
          <option value="uti" >Utica-rome-oneida</option>
          <option value="vld" >Valdosta</option>
          <option value="val" >Valencia</option>
          <option value="van" >Vancouver, Bc</option>
          <option value="ccs" >Venezuela</option>
          <option value="vce" >Venice / Veneto</option>
          <option value="oxr" >Ventura County</option>
          <option value="vcz" >Veracruz</option>
          <option value="brl" >Vermont</option>
          <option value="vic" >Victoria</option>
          <option value="vtx" >Victoria, Tx</option>
          <option value="vie" >Vienna</option>
          <option value="vtn" >Vietnam</option>
          <option value="vrg" >Virgin Islands</option>
          <option value="vis" >Visalia-tulare</option>
          <option value="wco" >Waco</option>
          <option value="wdc" >Washington, Dc</option>
          <option value="wlo" >Waterloo / Cedar Falls</option>
          <option value="wtn" >Watertown</option>
          <option value="wau" >Wausau</option>
          <option value="wll" >Wellington</option>
          <option value="wen" >Wenatchee</option>
          <option value="pal" >West Bank</option>
          <option value="wva" >West Virginia (old)</option>
          <option value="qcy" >Western Il</option>
          <option value="wky" >Western Ky</option>
          <option value="wmd" >Western Maryland</option>
          <option value="wma" >Western Massachusetts</option>
          <option value="gjt" >Western Slope</option>
          <option value="whi" >Whistler, Bc</option>
          <option value="whh" >Whitehorse</option>
          <option value="wic" >Wichita</option>
          <option value="wtf" >Wichita Falls</option>
          <option value="wpt" >Williamsport</option>
          <option value="wnc" >Wilmington, Nc</option>
          <option value="okv" >Winchester</option>
          <option value="wsr" >Windsor</option>
          <option value="win" >Winnipeg</option>
          <option value="wsl" >Winston-salem</option>
          <option value="wol" >Wollongong</option>
          <option value="wor" >Worcester / Central Ma</option>
          <option value="wuh" >Wuhan</option>
          <option value="wyo" >Wyoming</option>
          <option value="xiy" >Xi'an</option>
          <option value="yak" >Yakima</option>
          <option value="ykf" >Yellowknife</option>
          <option value="yrk" >York, Pa</option>
          <option value="yng" >Youngstown</option>
          <option value="ybs" >Yuba-sutter</option>
          <option value="yuc" >Yucatan</option>
          <option value="yum" >Yuma</option>
          <option value="zam" >Zamboanga</option>
          <option value="zvl" >Zanesville / Cambridge</option>
          <option value="zur" >Zurich</option>
        </select>
      </div>
    </div>  
  </fieldset>
  <fieldset id="spec-fieldset" class=""><legend>Location &amp; Specs</legend>
    <div class="row">
      <div id="location-col" class="col-lg-6">
        <div class="form-group {% if form.location.errors %} has-error {% endif %}">
          <label for="id_location" class="form-label">{{ form.location.label }} <span class="text-muted">(Be as specific as you want)</span></label>
            <input type="text" placeholder="Burlington, VT" class="location form-control" id="id_location" maxlength="200" name="location" value="{{ form.location.value|default:"" }}">
        </div>
        <div class="location-map-wrapper">
          <div id="location-map"></div>
          <button id="location-btn" class="btn btn-default" type="button">Autofill Current Location <i class="glyphicon glyphicon-screenshot"></i></button>
          <img src="{% static 'users/img/100px_loading.gif' %}" class="loading-spinner"/>
        </div>
        {# <label class="form-label">Map</label> #}
      </div>
      <div class="specs-form col-lg-6">
        <p id="no-specs"></p>
        {% for spec_key in spec_keys %}
        <div class="form-group" data-cat="{{ spec_key.category_id }}">
            <label class="control-label" for="id_spec-{{ spec_key.id }}">{{ spec_key.name }}</label>
            <input id="id_spec-{{ spec_key.id }}" class="form-control" type="text" disabled="disabled" name="spec-{{ spec_key.id }}" value="{{ specs|specval:spec_key.id }}"/>
        </div>
        {% endfor %}
      </div>
    </div>
  </fieldset>
  <fieldset>
    <legend>Photo Upload<small class="photo-view text-muted">Drag to reorder</small>
      <a class="btn btn-small btn-default pull-right photo-view toggle-view">Upload more</a>
      <a class="btn btn-small btn-default pull-right upload-view toggle-view" style="display: none;">Arrange photos</a>      
    </legend>
    {% for dict in photo_formset.errors %}
    {% for error in dict.values %}
      <div class="alert alert-warning alert-block">
      {{ error }}
      </div>  
    {% endfor %}
    {% endfor %}
    <div id="photos" class="row sortable photo-view">
      {% for form in photo_formset %}
        <div class="col-lg-2" data-id="{{ forloop.counter0 }}" draggable="true">
          {# <a class="thumbnail"> #}
            <img src="{{ S3_URL }}{{ form.key.value }}" class="img-responsive">
          {# </a> #}
        </div>
      {% endfor %}
    </div>
    <div id="photo_formset" class="hide">
      {{ photo_formset.management_form }}
      {% for form in photo_formset %}
      {% for field in form %}      
        {{ field }} 
      {% endfor %}
      <br/>
      {% endfor %}      
    </div>
    <iframe class="upload-view" id="fp-container"></iframe>

    {# Mustache Template #}
    {% verbatim %}
    <script id="thumbnail-template" type="text/template">
      {{#photos}}
      <div class="col-lg-2" data-id="{{ index }}" draggable="true">
        <img src="{{ src }}" class="img-responsive">
      </div>
      {{/photos}}
    </script>
    {% endverbatim %}

    <script id="photo-form-template" type="text/template">
      {% verbatim %}
      {{#photos}}
      {% endverbatim %}
      {% for field in photo_formset.empty_form %}{{ field }}{% endfor %}
      <br/>
      {% verbatim %}
      {{/photos}}
      {% endverbatim %}
    </script>

  </fieldset>
  <div class="btn-toolbar pull-right">
    {# <input id="submit-draft" type="submit" class="btn btn-primary" name="listing_action" value="Save as Draft"/> #}
    <input id="submit-publish" type="submit" class="btn btn-success" name="listing_action" value="Save to Craigslist"/>
  </div>
</form>