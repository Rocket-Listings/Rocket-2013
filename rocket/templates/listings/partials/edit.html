{% load specval %}
<form method="POST" class="listing-form form-horizontal">
  {% csrf_token %}
  {# Hidden fields  #}
  {% for hidden in form.hidden_fields %}{{ hidden }}{% endfor %}

  {# Errors at the top #}
  {% for field, errors in form.errors.items %}
    <div class="alert alert-error alert-block">
      <button type="button" class="close" data-dismiss="alert">&times;</button>
      <h4>Oops, a few errors</h4>
      <ul class="errors">
        {% for error in errors %}
          <li><strong>{{ field }}</strong>{{ error }}</li>
        {% endfor %}
      </ul>
    </div>
  {% endfor %}

  {# Category Select #}
  <ul class="nav nav-tabs">
    {% for group in cats %}
    <li{% if forloop.first %} class="active"{% endif %}>
      <a href="#{{ group.groupname }}" data-toggle="tab">{{ group.groupname }}</a>
    </li>
    {% endfor %}
  </ul>
  <div class="tab-content">
    {% for group in cats %}
    <div class="tab-pane{% if forloop.first %} active{% endif %}" id="{{ group.groupname }}">
      {% for cat in group.groupcats %}
      <a class="cat {{ group.groupname }}" data-id="{{ cat.id }}">{{ cat }}</a>
      {% endfor %}
    </div>
    {% endfor %}
  </div>

  {# First form row #}
  <div class="row">
    {# Title #}
    <div class="span6">
      <div class="row">
        <div class="span4">
          <label>{{ form.title.label }}</label>
          <input class="title input-block-level" maxlength="200" name="title" type="text" placeholder="e.g. 2000 Jeep Wrangler 4.0L" value="{{ form.title.value }}">
        </div>
        <div class="span2">
          <label>{{ form.price.label }}</label>
          <div class="input-prepend gridfix">
            <span class="add-on">$</span>
            <input class="price input-block-level" name="price" type="text" value="{{ form.price.value }}">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="span6">
          <label>{{ form.description.label }}</label>
          <textarea class="span6 description" placeholder="Describe your item" cols="40" name="description" rows="10">{{ form.description.value }}</textarea>
        </div>
      </div>
    </div>
    <div class="span3">
      <label>Location</label>
      <img src="http://placehold.it/370x390"/>
    </div>
  </div>
  <div class="hide">
    <input id="id_location" maxlength="200" name="location" type="text" value="Bethesda, MD">
  </div>
  <div class="row">
    <div class="span10">
      <h4>Specifications</h4>
      <div class="specs-form">
          {% for spec_key in spec_keys %}
          <div class="control-group hide" data-cat="{{ spec_key.category_id }}">
              <label class="control-label" for="spec-{{ spec_key.id }}">{{ spec_key.name }}</label>
              <div class="controls">
                <input type="text" disabled="disabled" name="spec-{{ spec_key.id }}" value="{{ specs|specval:spec_key.id }}"/>
              </div>
          </div>
          {% endfor %}
      </div>
    </div>
  </div>
  <div class="form-actions">
    <button type="submit" class="btn btn-primary">Post to Craigslist</button>
  </div>
</form>