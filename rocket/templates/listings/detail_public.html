{% extends 'listings/base.html' %}
{% load thumbnail %}
{% load compress %}
{% load static from staticfiles %}

{% block js %}
  {{ block.super }}
  {% compress js %}
  <script src="{% static 'listings/js/detail_public.js' %}"></script>
  {% endcompress %}
{% endblock %}

{% block content %}
  <div class="row">
    <div class="col-sm-9 listing-preview">
        <div class="row">
          <h3 class="col-10">{{ listing.title }}<small class="text-muted preview-location">{{ listing.location }}</small></h3>
          <h3 class="col-2 text-right text-success">
            {% if listing.price %}${{ listing.price }}{% endif %}
          </h3>
        </div>
        <div class="preview-thumbnails row">
          {% for photo in photos %}
            <div class="col-sm-2">
            {# <a class="thumbnail"> #}
              <img src="{{ S3_URL }}{{ photo.key }}" data-id="photo.id" class="img-responsive">
            {# </a> #}
            </div>
          {% endfor %}
        </div>
        <div class="preview-stage hidden-sm">
        {% with photos|first as first_photo %}
        <img src="{{ S3_URL }}{{ first_photo.key }}" class="img-responsive"/>
        {% endwith %}
        </div>
        <p class="preview-description">{{ listing.description }}</p>
        {% if specs %}
        <h4>Specs</h4>
        <dl class="dl-horizontal">
        {% for spec in specs.values %}
          <dt>{{ spec.key.name }}</dt>
          <dd>{{ spec.value }}</dd>
        {% endfor %}
        </dl>
        {% endif %}
    </div>
    <div class="col-sm-3"></div>
  </div>
{% endblock %}
